# Flask Project

Этот проект представляет собой интернет-магазин, реализованный на Flask с разделением на функциональные модули с помощью **Blueprints**. Проект включает функционал админской панели, каталога товаров, работы с корзиной и отзывами, а также систему пользователей с авторизацией.

## Стек технологий:

- **Flask** — основной фреймворк.
- **SQLAlchemy** — ORM для работы с базой данных.
- **Alembic** — миграции базы данных.
- **Flask-WTF** — формы и валидация.
- **Flask-Login** — управление сессиями пользователей.
- **Jinja2** — шаблонизатор для рендеринга HTML.
- **Faker** — генерация тестовых данных.
- **random**: для случайного выбора товаров.

### **`admin/`**: для административных маршрутов.

- **Blueprint** для маршрутов административной панели с префиксом `/admin`.
- **Авторизация** через **Flask-Login**: доступ разрешён только авторизованным пользователям с правами администратора.
- **Маршрут `/admin`** проверяет права пользователя и выводит соответствующее сообщение.

### **`home_page/`**: для главной страницы магазина.

- **Отображение товаров**: случайный выбор товаров с помощью `random.shuffle`, отображение 8 товаров на главной странице.
- **Гендерные фильтры**: фильтрация товаров по полу (мужской, женский, детский).
- **Добавление в корзину**: реализация через POST-запросы, с проверкой типа товара и его id.
- **Отображение корзины**: показ товаров с общим количеством и ценой, возможность удаления.

### **`migration/`**: для миграций базы данных с помощью Alembic.

- **Управления миграциями базы данных**: отслеживание изменений структуры базы данных (создание и изменение таблиц).
- **Синхронизация** базы данных с моделями, определёнными в проекте.

### **`order/`**: для управления заказами.

- **Добавление товаров в корзину**: через POST-запросы, с возможностью создания активного заказа.
- **Просмотр корзины**: отображение содержимого корзины с общей суммой и количеством.
- **Удаление товара**: из активного заказа.
- **Оформление заказа**: завершение покупки, изменение статуса заказа на "inactive".

### **`product_card/`**: для отображения карточек товаров.

- **Просмотр деталей товара**: информация о товаре, включая тип и id.
- **Отзывы**: пользователи могут оставлять отзывы с помощью формы, созданной через **Flask-WTF**.
- **Рейтинг**: вычисление среднего рейтинга товара на основе отзывов.
- **Авторизация**: только авторизованные пользователи могут оставлять отзывы.

### **`templates/`**: для хранения HTML-шаблонов.

- **main.html**: основной шаблон сайта.
- **navbar.html**: навигационная панель.
- **home_page.html**: главная страница с фильтрацией товаров.
- **registration.html**: форма регистрации пользователей.
- **account.html**: личная информация пользователя.
- **basket.html**: отображение корзины покупок.
- **catalog.html**: каталог товаров.
- **login.html**: страница входа для авторизации.
- **product_card.html**: карточка товара с информацией.
- **product_details.html**: страница с подробной информацией о товаре и отзывами.

### **`users/`**: для управления пользователями и авторизацией.

- Инициализирует приложение Flask, регистрирует **Blueprints** для различных модулей.
- Настраивает **Flask-Login** для управления сессиями пользователей.
- Включает **CSRF защиту** для предотвращения атак CSRF.
- Скрипт для создания администратора через командную строку.
- Проверяет уникальность пользователя и валидирует пароль перед добавлением в базу данных.

### Генерация тестовых данных (lib/database/faker_db.py)

Этот файл используется для создания фиктивных данных с помощью **Faker**:

- **Генерация пользователей**: создание пользователей с именами, email и паролями.
- **Адреса**: генерирует адреса для пользователей.
- **Отзывы**: создаёт отзывы с текстом и рейтингами для различных товаров.
- **Товары**: генерирует товары разных категорий с описанием, ценами и количеством.

###